<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="GoRetro - A modern retrospective tool for agile teams with real-time collaboration and AI-powered features">
    <title>GoRetro - Agile Retrospective Tool</title>
    <link rel="icon" type="image/x-icon" href="../static/icon.ico" />
    <link rel="icon" type="image/png" href="../static/icon.png" />
    <link rel="apple-touch-icon" href="../static/icon.png" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --secondary-color: #64748b;
            --bg-color: #f8fafc;
            --text-color: #1e293b;
            --border-color: #e2e8f0;
            --code-bg: #f1f5f9;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --header-gradient-1: #667eea;
            --header-gradient-2: #764ba2;
            --feature-gradient-1: #f6f8fb;
            --feature-gradient-2: #ffffff;
            --ai-gradient-1: #fef3c7;
            --ai-gradient-2: #fef9c3;
            --ai-border: #f59e0b;
            --warning-bg: #fef3c7;
            --warning-border: #f59e0b;
            --info-bg: #dbeafe;
            --info-border: #3b82f6;
        }

        [data-theme="dark"] {
            --primary-color: #3b82f6;
            --primary-hover: #2563eb;
            --secondary-color: #94a3b8;
            --bg-color: #0f172a;
            --text-color: #e2e8f0;
            --border-color: #334155;
            --code-bg: #1e293b;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
            --header-gradient-1: #1e3a8a;
            --header-gradient-2: #581c87;
            --feature-gradient-1: #1e293b;
            --feature-gradient-2: #334155;
            --ai-gradient-1: #422006;
            --ai-gradient-2: #451a03;
            --ai-border: #f59e0b;
            --warning-bg: #422006;
            --warning-border: #f59e0b;
            --info-bg: #1e3a8a;
            --info-border: #3b82f6;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
        }

        .header {
            background: linear-gradient(135deg, var(--header-gradient-1) 0%, var(--header-gradient-2) 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
            box-shadow: var(--shadow-lg);
            position: relative;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .header p {
            font-size: 1.25rem;
            opacity: 0.95;
            max-width: 600px;
            margin: 0 auto;
        }

        .github-link {
            display: inline-block;
            margin-top: 1rem;
            padding: 0.75rem 1.5rem;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .github-link:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        .theme-toggle {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background-color: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .theme-toggle:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .theme-toggle:active {
            transform: scale(0.95);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 0.75rem 2rem;
            background-color: var(--bg-color);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: var(--secondary-color);
            transition: all 0.3s;
            box-shadow: var(--shadow);
        }

        .tab-button:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .tab-button.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .content-card {
            background: var(--bg-color);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        h2 {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--primary-color);
        }

        h3 {
            color: var(--text-color);
            font-size: 1.5rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        h4 {
            color: var(--text-color);
            font-size: 1.25rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }

        ul, ol {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .feature-item {
            background: linear-gradient(135deg, var(--feature-gradient-1) 0%, var(--feature-gradient-2) 100%);
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
            box-shadow: var(--shadow);
        }

        .feature-item h3 {
            margin-top: 0;
            color: var(--primary-color);
            font-size: 1.25rem;
        }

        .feature-item p {
            color: var(--secondary-color);
            line-height: 1.6;
        }

        code {
            background-color: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
            color: #e11d48;
        }

        pre {
            background-color: var(--code-bg);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
            border: 1px solid var(--border-color);
        }

        pre code {
            background-color: transparent;
            padding: 0;
            color: var(--text-color);
        }

        .env-var {
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .env-var-name {
            font-family: 'Monaco', 'Courier New', monospace;
            font-weight: 700;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .env-var-required {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            background-color: #dc2626;
            color: white;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-left: 0.5rem;
            font-weight: 600;
        }

        .env-var-optional {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            background-color: #16a34a;
            color: white;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-left: 0.5rem;
            font-weight: 600;
        }

        .env-var-description {
            margin-top: 0.5rem;
            color: var(--secondary-color);
        }

        .env-var-default {
            margin-top: 0.5rem;
            font-style: italic;
            color: var(--secondary-color);
            font-size: 0.9rem;
        }

        .phase-list {
            list-style: none;
            margin-left: 0;
        }

        .phase-list li {
            padding: 1rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--feature-gradient-1) 0%, var(--feature-gradient-2) 100%);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }

        .phase-list strong {
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .footer {
            text-align: center;
            padding: 2rem;
            color: var(--secondary-color);
            background: var(--bg-color);
            margin-top: 3rem;
            border-top: 1px solid var(--border-color);
        }

        .ai-feature {
            background: linear-gradient(135deg, var(--ai-gradient-1) 0%, var(--ai-gradient-2) 100%);
            border-left-color: var(--ai-border);
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background-color: var(--primary-color);
            color: white;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .warning-box {
            background-color: var(--warning-bg);
            border-left: 4px solid var(--warning-border);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .info-box {
            background-color: var(--info-bg);
            border-left: 4px solid var(--info-border);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .header p {
                font-size: 1rem;
            }

            .container {
                padding: 1rem;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle dark mode">
            <span id="theme-icon">üåô</span>
            <span id="theme-text">Dark</span>
        </button>
        <img src="../static/icon.png" alt="GoRetro Logo" style="width: 80px; height: 80px; margin: 0 auto 1rem;">
        <h1>GoRetro</h1>
        <p>A modern retrospective tool for agile teams with real-time collaboration and AI-powered features</p>
        <a href="https://github.com/Armatorix/GoRetro" class="github-link" target="_blank">
            View on GitHub ‚Üí
        </a>
    </div>

    <div class="container">
        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('features')">Features</button>
            <button class="tab-button" onclick="switchTab('configuration')">Configuration</button>
            <button class="tab-button" onclick="switchTab('deployment')">Deployment</button>
            <button class="tab-button" onclick="switchTab('usage')">Usage Guide</button>
        </div>

        <div id="features" class="tab-content active">
            <div class="content-card">
                <h2>‚ö†Ô∏è Authentication Requirement</h2>
                <div class="warning-box">
                    <strong>OAuth2 Proxy Required:</strong> GoRetro requires an OAuth2 proxy (such as oauth2-proxy) to be configured in front of the application. The proxy must set proper authentication headers (<code>X-Forwarded-User</code>, <code>X-Forwarded-Email</code>, etc.) that the application uses to identify users. The application does not handle authentication directly.
                </div>
            </div>

            <div class="content-card">
                <h2>Core Features</h2>
                
                <div class="feature-grid">
                    <div class="feature-item">
                        <h3>üóÇÔ∏è Multi-phase Retrospectives</h3>
                        <p>Structured workflow with Ticketing, Merging, Voting, Discussion, and Summary phases</p>
                    </div>

                    <div class="feature-item">
                        <h3>‚ö° Real-time Collaboration</h3>
                        <p>WebSocket-based synchronization with Redis support for distributed deployments</p>
                    </div>

                    <div class="feature-item">
                        <h3>üë• Participant Management</h3>
                        <p>Owner/Moderator roles with approval workflow for joining participants</p>
                    </div>

                    <div class="feature-item ai-feature">
                        <h3>ü§ñ AI-Powered Auto-merge</h3>
                        <p>Automatically group similar tickets using AI semantic analysis</p>
                    </div>

                    <div class="feature-item ai-feature">
                        <h3>üéØ AI Action Proposals</h3>
                        <p>Generate actionable items from retrospective feedback with context awareness</p>
                    </div>

                    <div class="feature-item">
                        <h3>üåç Internationalization</h3>
                        <p>Multi-language support with automatic detection (English & Polish)</p>
                    </div>

                    <div class="feature-item">
                        <h3>üê≥ Docker Support</h3>
                        <p>Easy deployment with Docker Compose including all dependencies</p>
                    </div>
                </div>
            </div>

            <div class="content-card">
                <h2>Retrospective Phases</h2>
                
                <ul class="phase-list">
                    <li>
                        <strong>1. Ticketing Phase</strong><br>
                        Team members add retrospective items in various categories (what went well, what needs improvement, action items, etc.)
                    </li>
                    <li>
                        <strong>2. Merging Phase</strong><br>
                        Group similar tickets together manually or use AI auto-merge to identify semantically similar items
                    </li>
                    <li>
                        <strong>3. Voting Phase</strong><br>
                        Team votes on the most important items to focus discussion on the highest priority topics
                    </li>
                    <li>
                        <strong>4. Discussion Phase</strong><br>
                        Discuss top-voted items and create actionable tasks to address them
                    </li>
                    <li>
                        <strong>5. Summary Phase</strong><br>
                        Review all feedback and action items, with optional AI-powered action proposals
                    </li>
                </ul>
            </div>

            <div class="content-card">
                <h2>AI Features<span class="badge">Optional</span></h2>
                
                <h3>Auto-merge Feature</h3>
                <p>When chat completion API is configured, moderators see an "Auto-merge" button during the Discussion phase.</p>
                
                <div class="info-box">
                    <strong>How it works:</strong>
                    <ul>
                        <li>Analyzes all ticket content</li>
                        <li>Identifies similar tickets based on semantic similarity</li>
                        <li>Automatically groups related tickets together</li>
                        <li>Provides reasoning for each grouping</li>
                    </ul>
                </div>

                <h3>Auto-propose Actions Feature</h3>
                <p>During the Summary phase, moderators can generate AI-powered action proposals from retrospective feedback.</p>
                
                <div class="info-box">
                    <strong>Capabilities:</strong>
                    <ul>
                        <li>Analyzes all retrospective tickets and feedback</li>
                        <li>Considers team context if provided (tech stack, constraints, etc.)</li>
                        <li>Generates specific, actionable items addressing raised issues</li>
                        <li>Links each action to the relevant ticket</li>
                        <li>Marks AI-generated actions with a ü§ñ robot icon prefix</li>
                        <li>Focuses on the most important issues (higher votes, discussed items)</li>
                    </ul>
                </div>

                <h4>Supported APIs</h4>
                <p>Compatible with OpenAI-compatible chat completion APIs:</p>
                <ul>
                    <li>OpenAI API (GPT-4, GPT-4-turbo, GPT-3.5-turbo)</li>
                    <li>Azure OpenAI Service</li>
                    <li>Other OpenAI-compatible endpoints</li>
                </ul>
            </div>
        </div>

        <div id="configuration" class="tab-content">
            <div class="content-card">
                <h2>Environment Variables</h2>
                
                <h3>Database Configuration</h3>
                
                <div class="env-var">
                    <div class="env-var-name">
                        DATABASE_URL
                        <span class="env-var-required">REQUIRED</span>
                    </div>
                    <div class="env-var-description">
                        PostgreSQL connection string for storing retrospective data
                    </div>
                    <div class="env-var-default">
                        Default: <code>postgres://goretro:goretro@localhost:5432/goretro?sslmode=disable</code>
                    </div>
                </div>

                <h3>Redis Configuration</h3>
                
                <div class="env-var">
                    <div class="env-var-name">
                        REDIS_URL
                        <span class="env-var-optional">OPTIONAL</span>
                    </div>
                    <div class="env-var-description">
                        Redis server address for distributed WebSocket synchronization. Required when running multiple application instances.
                    </div>
                    <div class="env-var-default">
                        Format: <code>host:port</code> (e.g., <code>redis:6379</code>)
                    </div>
                </div>

                <h3>AI Features Configuration</h3>
                
                <div class="env-var">
                    <div class="env-var-name">
                        CHAT_COMPLETION_ENDPOINT
                        <span class="env-var-optional">OPTIONAL</span>
                    </div>
                    <div class="env-var-description">
                        Chat completion API endpoint for AI features (auto-merge and action proposals)
                    </div>
                    <div class="env-var-default">
                        Example: <code>https://api.openai.com/v1/chat/completions</code>
                    </div>
                </div>

                <div class="env-var">
                    <div class="env-var-name">
                        CHAT_COMPLETION_API_KEY
                        <span class="env-var-optional">OPTIONAL</span>
                    </div>
                    <div class="env-var-description">
                        API key for the chat completion service
                    </div>
                    <div class="env-var-default">
                        Example: <code>sk-your-api-key-here</code>
                    </div>
                </div>

                <div class="env-var">
                    <div class="env-var-name">
                        CHAT_COMPLETION_MODEL
                        <span class="env-var-optional">OPTIONAL</span>
                    </div>
                    <div class="env-var-description">
                        Model to use for chat completion
                    </div>
                    <div class="env-var-default">
                        Default: <code>gpt-4</code><br>
                        Options: <code>gpt-4</code>, <code>gpt-4-turbo</code>, <code>gpt-3.5-turbo</code>, etc.
                    </div>
                </div>

                <h3>Authentication Configuration</h3>
                
                <div class="warning-box">
                    <strong>‚ö†Ô∏è Required:</strong> GoRetro must be deployed behind an OAuth2 proxy that sets authentication headers. The application expects headers like <code>X-Forwarded-User</code> and <code>X-Forwarded-Email</code> to identify users. Without these headers, the application will not function correctly.
                    <br><br>
                    OAuth2 proxy configuration is included in the docker-compose.yml file. See the Deployment tab for complete setup instructions.
                </div>
            </div>

            <div class="content-card">
                <h2>Configuration Examples</h2>
                
                <h3>Minimal Configuration (Local Development)</h3>
                <pre><code># .env file
DATABASE_URL=postgres://goretro:goretro@localhost:5432/goretro?sslmode=disable</code></pre>

                <h3>Production Configuration with AI Features</h3>
                <pre><code># .env file
DATABASE_URL=postgres://user:password@db-host:5432/goretro?sslmode=require
REDIS_URL=redis-host:6379
CHAT_COMPLETION_ENDPOINT=https://api.openai.com/v1/chat/completions
CHAT_COMPLETION_API_KEY=sk-your-api-key-here
CHAT_COMPLETION_MODEL=gpt-4</code></pre>

                <h3>Azure OpenAI Configuration</h3>
                <pre><code># .env file
DATABASE_URL=postgres://user:password@db-host:5432/goretro?sslmode=require
REDIS_URL=redis-host:6379
CHAT_COMPLETION_ENDPOINT=https://your-resource.openai.azure.com/openai/deployments/your-deployment/chat/completions?api-version=2023-05-15
CHAT_COMPLETION_API_KEY=your-azure-api-key
CHAT_COMPLETION_MODEL=gpt-4</code></pre>
            </div>
        </div>

        <div id="deployment" class="tab-content">
            <div class="content-card">
                <h2>Deployment Options</h2>
                
                <h3>Docker Compose (Recommended)</h3>
                <p>The easiest way to deploy GoRetro is using Docker Compose, which includes all dependencies:</p>
                
                <h4>Prerequisites</h4>
                <ul>
                    <li>Docker and Docker Compose installed</li>
                    <li>PostgreSQL database (included in docker-compose.yml)</li>
                    <li>Redis (optional, included in docker-compose.yml)</li>
                </ul>

                <h4>Quick Start</h4>
                <pre><code># Clone the repository
git clone https://github.com/Armatorix/GoRetro.git
cd GoRetro

# Create .env file with your configuration
cat > .env << EOF
DATABASE_URL=postgres://goretro:goretro@postgres:5432/goretro?sslmode=disable
REDIS_URL=redis:6379
# Add AI configuration if desired
# CHAT_COMPLETION_ENDPOINT=https://api.openai.com/v1/chat/completions
# CHAT_COMPLETION_API_KEY=your-key-here
EOF

# Start all services (includes OAuth2 proxy)
docker compose up -d

# Access the application through OAuth2 proxy
# Application is available at: http://localhost</code></pre>

                <h4>Services Included</h4>
                <ul>
                    <li><strong>PostgreSQL</strong> - Database on port 5432</li>
                    <li><strong>Redis</strong> - Cache and pub/sub on port 6379</li>
                    <li><strong>GoRetro App</strong> - Main application on port 8080 (internal only)</li>
                    <li><strong>OAuth2 Proxy</strong> - Required authentication layer on port 80 (public endpoint)</li>
                    <li><strong>Dex</strong> - OIDC provider on port 5556</li>
                </ul>

                <div class="warning-box">
                    <strong>‚ö†Ô∏è Important:</strong> The OAuth2 proxy is <strong>required</strong> and must be properly configured. The GoRetro application expects authentication headers from the proxy and will not work without them.
                    <br><br>
                    <strong>For production:</strong> Update the OAuth2 configuration in docker-compose.yml and dex/config.yaml with proper credentials, callback URLs, and OIDC providers. Never expose the application port (8080) directly - always access through the OAuth2 proxy.
                </div>
            </div>

            <div class="content-card">
                <h2>Standalone Deployment</h2>
                
                <div class="warning-box">
                    <strong>‚ö†Ô∏è OAuth2 Proxy Required:</strong> When deploying standalone, you <strong>must</strong> configure an OAuth2 proxy (such as oauth2-proxy) in front of the GoRetro application. The application requires authentication headers (<code>X-Forwarded-User</code>, <code>X-Forwarded-Email</code>) to function. Do not expose the application directly to users.
                </div>
                
                <h3>Building from Source</h3>
                <pre><code># Prerequisites: Go 1.21 or higher

# Clone and build
git clone https://github.com/Armatorix/GoRetro.git
cd GoRetro
go build -o goretro

# Set environment variables
export DATABASE_URL="postgres://user:password@localhost:5432/goretro?sslmode=disable"
export REDIS_URL="localhost:6379"  # Optional

# Run (behind OAuth2 proxy - do not expose directly!)
./goretro</code></pre>

                <div class="info-box">
                    <strong>Next Steps:</strong> After building, you must configure an OAuth2 proxy to:
                    <ul>
                        <li>Handle user authentication</li>
                        <li>Set required headers: <code>X-Forwarded-User</code>, <code>X-Forwarded-Email</code></li>
                        <li>Proxy requests to the GoRetro application</li>
                    </ul>
                    See the Docker Compose configuration for a complete OAuth2 proxy setup example.
                </div>

                <h3>Database Setup</h3>
                <p>GoRetro uses PostgreSQL. You need to:</p>
                <ol>
                    <li>Create a PostgreSQL database</li>
                    <li>Run migrations (handled automatically on startup)</li>
                    <li>Configure DATABASE_URL environment variable</li>
                </ol>

                <h3>Scaling Considerations</h3>
                <div class="info-box">
                    <strong>Multiple Instances:</strong>
                    <ul>
                        <li>Configure REDIS_URL for WebSocket synchronization across instances</li>
                        <li>Use a load balancer with sticky sessions for WebSocket connections</li>
                        <li>Share the same PostgreSQL database across all instances</li>
                    </ul>
                </div>
            </div>

            <div class="content-card">
                <h2>Development Setup</h2>
                
                <h3>Using Make</h3>
                <pre><code># Start all services including OAuth2 proxy with hot-reload
make up

# Access at http://localhost (through OAuth2 proxy)</code></pre>

                <h3>Manual Development</h3>
                <pre><code># Start all dependencies including OAuth2 proxy
docker compose up postgres redis oauth2-proxy dex -d

# Set environment variables
export DATABASE_URL="postgres://goretro:goretro@localhost:5432/goretro?sslmode=disable"
export REDIS_URL="localhost:6379"

# Run the app (it will receive headers from OAuth2 proxy)
go run main.go

# Access at http://localhost (through OAuth2 proxy on port 80)
# The app runs on port 8080 but should only be accessed via proxy</code></pre>
                
                <div class="info-box">
                    <strong>Development Note:</strong> Even in development, use the OAuth2 proxy to access the application. The app expects authentication headers that only the proxy provides. Direct access to port 8080 will not work correctly.
                </div>
            </div>
        </div>

        <div id="usage" class="tab-content">
            <div class="content-card">
                <h2>Getting Started</h2>
                
                <h3>Creating a Retrospective</h3>
                <ol>
                    <li>Navigate to the GoRetro homepage</li>
                    <li>Click "Create New Retrospective"</li>
                    <li>Enter a room name and create the room</li>
                    <li>Share the room link with your team members</li>
                    <li>Approve participants as they join (as moderator/owner)</li>
                </ol>

                <h3>Running a Retrospective</h3>
                
                <h4>Phase 1: Ticketing</h4>
                <ul>
                    <li>Team members add tickets in various categories</li>
                    <li>Everyone can see tickets as they're created (real-time updates)</li>
                    <li>Tickets can be edited or deleted by their creators</li>
                    <li>When ready, moderator advances to the next phase</li>
                </ul>

                <h4>Phase 2: Merging</h4>
                <ul>
                    <li><strong>Manual:</strong> Drag similar tickets together to group them</li>
                    <li><strong>AI-Powered:</strong> Click "Auto-merge" to let AI identify and group similar tickets (requires AI configuration)</li>
                    <li>Review and adjust groupings as needed</li>
                    <li>Advance to voting when satisfied with groupings</li>
                </ul>

                <h4>Phase 3: Voting</h4>
                <ul>
                    <li>Each team member gets a limited number of votes</li>
                    <li>Vote on the most important items for discussion</li>
                    <li>Votes are visible to all participants</li>
                    <li>When voting is complete, advance to discussion</li>
                </ul>

                <h4>Phase 4: Discussion</h4>
                <ul>
                    <li>Focus on the highest-voted items</li>
                    <li>Mark items as "discussed" as you cover them</li>
                    <li>Create action items to address issues</li>
                    <li>Assign action items to team members</li>
                    <li>Move to summary when discussion is complete</li>
                </ul>

                <h4>Phase 5: Summary</h4>
                <ul>
                    <li>Review all tickets and action items</li>
                    <li><strong>AI-Powered:</strong> Click "Auto-propose" to generate additional action proposals (requires AI configuration)</li>
                    <li>Provide team context for more relevant AI suggestions</li>
                    <li>Review and accept/edit AI-generated actions (marked with ü§ñ)</li>
                    <li>Export or save the retrospective summary</li>
                </ul>
            </div>

            <div class="content-card">
                <h2>Best Practices</h2>
                
                <h3>Effective Retrospectives</h3>
                <ul>
                    <li><strong>Time-box phases:</strong> Set time limits for each phase to keep the retrospective focused</li>
                    <li><strong>Encourage participation:</strong> Ensure all team members contribute tickets and votes</li>
                    <li><strong>Focus on actions:</strong> The goal is actionable improvements, not just discussion</li>
                    <li><strong>Follow up:</strong> Review action items from previous retrospectives</li>
                </ul>

                <h3>Using AI Features Effectively</h3>
                <ul>
                    <li><strong>Auto-merge:</strong> Use after initial ticketing to identify patterns you might have missed</li>
                    <li><strong>Review AI groupings:</strong> AI suggestions are helpful but not perfect‚Äîadjust as needed</li>
                    <li><strong>Provide context:</strong> When using auto-propose, give team context (tech stack, current sprint goals) for better suggestions</li>
                    <li><strong>Edit AI actions:</strong> Use AI proposals as a starting point and refine them for your team</li>
                </ul>

                <h3>Team Size Considerations</h3>
                <ul>
                    <li><strong>Small teams (3-5):</strong> Standard workflow works well</li>
                    <li><strong>Medium teams (6-10):</strong> Consider using AI auto-merge to handle more tickets</li>
                    <li><strong>Large teams (10+):</strong> Consider breaking into smaller groups or using AI features heavily</li>
                </ul>
            </div>

            <div class="content-card">
                <h2>Language Support</h2>
                
                <p>GoRetro supports multiple languages with automatic browser detection:</p>
                
                <ul>
                    <li><strong>English (en)</strong> - Default language</li>
                    <li><strong>Polish (pl)</strong> - Full Polish translation</li>
                </ul>

                <h3>Language Selection</h3>
                <ul>
                    <li>Automatically detects browser language on first visit</li>
                    <li>Language selector in navigation bar for manual switching</li>
                    <li>Preference saved in localStorage and cookies</li>
                    <li>Changes take effect immediately without page reload</li>
                </ul>
            </div>

            <div class="content-card">
                <h2>Troubleshooting</h2>
                
                <h3>Common Issues</h3>
                
                <h4>WebSocket Connection Issues</h4>
                <ul>
                    <li>Check that the application is running and accessible</li>
                    <li>Verify firewall settings allow WebSocket connections</li>
                    <li>For distributed setups, ensure Redis is properly configured</li>
                </ul>

                <h4>AI Features Not Available</h4>
                <ul>
                    <li>Verify <code>CHAT_COMPLETION_ENDPOINT</code> and <code>CHAT_COMPLETION_API_KEY</code> are set</li>
                    <li>Check API key is valid and has sufficient credits/quota</li>
                    <li>Ensure endpoint URL is correct and accessible</li>
                    <li>Check application logs for API error messages</li>
                </ul>

                <h4>Database Connection Errors</h4>
                <ul>
                    <li>Verify PostgreSQL is running</li>
                    <li>Check <code>DATABASE_URL</code> is correctly formatted</li>
                    <li>Ensure database user has proper permissions</li>
                    <li>Verify database exists and migrations have run</li>
                </ul>

                <h4>Authentication Issues</h4>
                <ul>
                    <li>Verify OAuth2 Proxy and Dex are running and accessible</li>
                    <li>Check OAuth2 proxy is setting headers correctly (<code>X-Forwarded-User</code>, <code>X-Forwarded-Email</code>)</li>
                    <li>Ensure redirect URLs in dex/config.yaml match your deployment URL</li>
                    <li>Verify client ID and secret match between OAuth2 proxy and Dex</li>
                    <li>Confirm cookies are enabled in the browser</li>
                    <li>Never access the application directly on port 8080 - always use the OAuth2 proxy endpoint</li>
                    <li>Check OAuth2 proxy logs for authentication errors</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>GoRetro - Open Source Retrospective Tool</p>
        <p>Built with ‚ù§Ô∏è for Agile Teams</p>
        <p><a href="https://github.com/Armatorix/GoRetro" target="_blank" style="color: #2563eb;">GitHub Repository</a></p>
    </div>

    <script>
        function switchTab(tabName) {
            // Hide all tab contents
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => {
                content.classList.remove('active');
            });

            // Remove active class from all buttons
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => {
                button.classList.remove('active');
            });

            // Show selected tab content
            document.getElementById(tabName).classList.add('active');

            // Add active class to clicked button
            event.target.classList.add('active');

            // Update URL hash without scrolling
            history.replaceState(null, null, '#' + tabName);
        }

        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('goretro-theme', newTheme);
            
            updateThemeButton(newTheme);
        }

        function updateThemeButton(theme) {
            const icon = document.getElementById('theme-icon');
            const text = document.getElementById('theme-text');
            
            if (theme === 'dark') {
                icon.textContent = '‚òÄÔ∏è';
                text.textContent = 'Light';
            } else {
                icon.textContent = 'üåô';
                text.textContent = 'Dark';
            }
        }

        function initializeTheme() {
            const savedTheme = localStorage.getItem('goretro-theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = savedTheme || (prefersDark ? 'dark' : 'light');
            
            document.documentElement.setAttribute('data-theme', theme);
            updateThemeButton(theme);
        }

        // Initialize theme before page renders
        initializeTheme();

        // Check URL hash on load and switch to that tab
        window.addEventListener('DOMContentLoaded', () => {
            const hash = window.location.hash.substring(1);
            if (hash) {
                const button = document.querySelector(`[onclick="switchTab('${hash}')"]`);
                if (button) {
                    button.click();
                }
            }
        });

        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!localStorage.getItem('goretro-theme')) {
                const theme = e.matches ? 'dark' : 'light';
                document.documentElement.setAttribute('data-theme', theme);
                updateThemeButton(theme);
            }
        });
    </script>
</body>
</html>
